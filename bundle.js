(()=>{"use strict";(()=>{function e(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(e){if("string"==typeof e)return t(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?t(e,n):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function n(e,t){return e.filter((function(e){return e===t})).length}var r,o,i;function a(e,t,n){var r=document.createElement("div");r.classList.add("line"),r.id="line-".concat(e);var o=document.createElement("div");o.classList.add("red-indicator-container");var i=document.createElement("div");i.classList.add("white-indicator-container");var a=document.createElement("div");a.classList.add("targets-container");for(var c=0;c<n;c++){var l=document.createElement("div");l.classList.add("target");var d=document.createElement("div");d.classList.add("target-piece"),l.appendChild(d),a.appendChild(l)}i.style.width="".concat(30*n,"px"),o.style.width="".concat(30*n,"px"),r.appendChild(o),r.appendChild(a),r.appendChild(i),t.appendChild(r)}function c(e,t,n){for(var o=0;o<n;o++){var i=document.createElement("div");switch(e){case r.red:i.classList.add("red-indicator");break;case r.white:i.classList.add("white-indicator")}t.appendChild(i)}}function l(e,t){document.getElementById("".concat(e,"-piece")).style.display=t}function d(e){var t=document.getElementById("line-".concat(e));if(!t)throw new Error("Line does not exist");return{targets:t.querySelectorAll("div.targets-container > div.target"),redIndicatorsContainer:t.querySelector("div.red-indicator-container"),whiteIndicatorsContainer:t.querySelector("div.white-indicator-container")}}function u(e,t,n){var r=e.querySelector("span"),o=n+1-t;if(!r)throw new Error("No span found in the tooltip");r.innerHTML="".concat(o),o<=Math.floor(n/3)?r.style.color="red":o<=2*Math.floor(n/3)?r.style.color="orange":r.style.color="green"}function s(e,t){switch(t){case o.running:e.innerHTML=o.running;break;case o.finish:e.innerHTML=o.finish}}function m(e){return function(e){if(Array.isArray(e))return f(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function p(e){var t,n=e.target.id.split("-")[0];null===(t=e.dataTransfer)||void 0===t||t.setData("text/plain",n),e.dataTransfer.effectAllowed="move"}function v(e){e.preventDefault(),e.dataTransfer.dropEffect="move"}function y(e,t){var n;e.preventDefault();var r=e.dataTransfer.getData("text/plain"),o=e.currentTarget.querySelector("div.target-piece");(n=o.classList).remove.apply(n,m(t)),o.classList.add(r,"current-target-piece")}function g(e){var t,n=e.currentTarget.querySelector("div.target-piece");(t=n.classList).remove.apply(t,m(n.classList.value.split(" "))),n.classList.add("target-piece")}function h(e,t){for(var n=0;n<e.length;n++)e[n].addEventListener("dragover",v,!0),e[n].addEventListener("drop",(function(e){return y(e,t)})),e[n].addEventListener("mousedown",g)}function E(e){for(var t=0;t<e.length;t++)e[t].removeEventListener("dragover",v,!0),e[t].removeEventListener("mousedown",g),e[t].classList.remove("current-target")}function b(e){E(d(document.getElementsByClassName("line").length).targets),e.target.closest(".popup").style.display="none"}!function(e){e[e.white=0]="white",e[e.red=1]="red"}(r||(r={})),function(e){e.running="Vérifier",e.finish="Voir le résultat"}(o||(o={})),function(e){e[e.win=0]="win",e[e.lose=1]="lose"}(i||(i={}));var w=document.getElementById("game-container"),I=[document.getElementById("blue-piece"),document.getElementById("red-piece"),document.getElementById("green-piece"),document.getElementById("yellow-piece"),document.getElementById("orange-piece"),document.getElementById("black-piece"),document.getElementById("white-piece"),document.getElementById("maroon-piece")];!function(e){window.addEventListener("DOMContentLoaded",(function(){e.forEach((function(e){return e.addEventListener("dragstart",p)}))}))}(I);var L,B=I.map((function(e){return e.id.split("-")[0]})),A=document.getElementById("parametersPopup"),C=document.getElementById("win"),S=document.getElementById("lose");L=function(){G=U.checked,K=z.valueAsNumber,J=$.valueAsNumber,Q=F.valueAsNumber,!1===G&&K<Q?alert("Attention, autorisez les doublons ou mettez un nombre de couleurs supérieur ou égal au nombre de possibilités par ligne"):(A.style.display="none",R())},A.addEventListener("submit",(function(e){e.preventDefault(),L()}));var T=document.getElementById("cancelParameters"),M=document.getElementById("verify"),k=document.getElementById("restart"),N=document.getElementById("win-restart"),x=document.getElementById("lose-restart"),D=document.getElementById("parameters");!function(e){for(var t=0;t<e.length;t++)e[t].addEventListener("click",b)}(document.getElementsByClassName("reduce-popUp"));var q,H,P,j,O,V=document.getElementById("tooltip"),U=document.getElementById("duplicateCheck"),z=document.getElementById("nbColorsValue"),$=document.getElementById("nbTurnsValue"),F=document.getElementById("nbPossibilitiesValue"),G=U.checked,J=$.valueAsNumber,K=z.valueAsNumber,Q=F.valueAsNumber;function R(){u(V,q=1,J);var t,n=function(e,t){return e.sort((function(){return.5-Math.random()})).slice(0,t)}(B,K);t=n,B.forEach((function(e){t.includes(e)?l(e,"block"):l(e,"none")})),O=function(t,n,r){if(!r&&n>t.length)throw new Error("Impossible to create a combination");if(!1===r){var o=t.sort((function(){return.5-Math.random()}));return Array.from(new Set(o)).slice(0,n)}return e(Array(n)).map((function(){return t[Math.floor(Math.random()*t.length)]}))}(n,Q,G),w.innerHTML="",a(q,w,Q);var r=d(q),i=r.targets,c=r.redIndicatorsContainer,m=r.whiteIndicatorsContainer;P=c,j=m,h(H=i,B),s(M,o.running)}function W(e){e===i.win?(document.getElementById("nb-round").innerHTML="Tu as trouvé la combinaison en ".concat(q," tours"),C.style.display="flex"):function(){var e=document.getElementById("solution-combination");e.innerHTML="";for(var t=0;t<O.length;t++){var n=document.createElement("div");n.classList.add("piece",O[t]),e.appendChild(n)}S.style.display="flex"}(),s(M,o.finish),u(V,q+1,J)}M.onclick=function(){var t;try{t=function(e,t){for(var n=[],r=function(r){var o=e[r].querySelector("div.target-piece");o.classList.remove("alert");var i=o.className.split(" ").filter((function(e){return t.includes(e)}))[0];i?n.push(i):setTimeout((function(){o.classList.add("alert")}),1)},o=0;o<e.length;o++)r(o);if(n.length!==e.length)throw new Error("Combination is not complete");return n}(H,B)}catch(e){return}var l=function(t,r){var o=[],i=[];return t.forEach((function(t,a){if(r[a]===t)return o.push(t),void(o.filter((function(e){return e===t})).length===n(r,t)&&(i=i.filter((function(e){return e!==t}))));r.includes(t)&&[].concat(o,e(i)).filter((function(e){return e===t})).length<n(r,t)&&i.push(t)})),{goodPlacement:o.length,wrongPlacement:i.length}}(t,O),s=l.goodPlacement,m=l.wrongPlacement;(function(e){return e.innerHTML==o.finish})(M)||(c(r.red,P,s),c(r.white,j,m)),s!==Q?q!==J?function(){E(H),q++,u(V,q,J),a(q,w,Q);var e=d(q),t=e.targets,n=e.redIndicatorsContainer,r=e.whiteIndicatorsContainer;P=n,j=r,h(H=t,B)}():W(i.lose):W(i.win)},k.onclick=R,T.onclick=function(){A.style.display="none"},D.onclick=function(){A.style.display="flex"},N.onclick=function(e){e.preventDefault(),C.style.display="none",R()},x.onclick=function(e){e.preventDefault(),S.style.display="none",R()},R()})()})();
//# sourceMappingURL=bundle.js.map